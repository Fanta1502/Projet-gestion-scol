package com.backend.service;

import org.springframework.data.domain.Page;
import org.springframework.stereotype.Service;

import com.backend.payload.request.SearchRequest;
import com.backend.payload.request.SearchRequestUtil;
import com.backend.payload.response.PageResponse;
import com.backend.persistence.dao.EtablissementDAO;
import com.backend.persistence.dto.EleveDto;
import com.backend.persistence.entities.Eleve;
import com.backend.persistence.entities.Etablissement;
import com.backend.persistence.mappers.EtablissementMapper;

import lombok.AllArgsConstructor;
import lombok.extern.slf4j.Slf4j;

@Service
@Slf4j
@AllArgsConstructor
public class EtablissementService {
	private final EtablissementDAO etablissementDAO;
	private final EtablissementMapper etablissementMapper;
	public PageResponse<EtablissementDto> all(final SearchRequest request)
	{
		try {
			Page<Etablissement> etablissements = etablissementDAO.findAll(SearchRequestUtil.toPageRequest(request));
			log.info("Etablissement response successfully");
			return new PageResponse<EtablissementDto>(etablissementMapper.fromEntitiesToDtoList(etablissements.getContent()), etablissements.getSize(),etablissements.getTotalElements());
		} catch (Exception e) {
			log.error("There was an error while getting etablissemnt", e);
			return null;
		}		
	}
}
